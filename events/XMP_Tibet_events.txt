namespace = XMP_TIB

###Dalai Lama Selection###

country_event = { #First Dalai Lama
	id = XMP_TIB.1
	title = XMP_TIB.1.t
	desc = XMP_TIB.1.d
	picture = BUDDHISM_LAMA_eventPicture
	is_triggered_only = yes
	fire_only_once = yes
	major = yes  #Notification for everyone
	option = {
		trigger = {
			NOT = { has_reform = celestial_empire }
		}				
		name = XMP_TIB.1.a
		ai_chance = { factor = 100 }
		if = {
			limit = {
				NOT = {
					religion = vajrayana
				}
			}
			change_religion = vajrayana
		}
		if = {
			limit = {
				NOT = {
					government = XMP_TIB_Government
				}
			}
			change_government_to_XMP_TIB_Government = yes
			add_government_reform = XMP_TIB_tibetan_theocracy_reform
		}
		else = {
			add_devotion = 20
		}
		set_country_flag = XMP_first_dalai_lama_on_action_bugfix_flag #sets limit before defining new ruler so on_monarch_death action doesn't fire for first ruler of new government
		kill_heir = yes
		define_ruler = {
			name = "Gendun"
			dynasty = "Drubpa"
			religion = vajrayana
			culture = tibetan
			age = 53
			fixed = yes
			adm = 5
			dip = 6
			mil = 4
			}		
		add_devotion = 100
		add_faction_influence = {
			faction = XMP_yellow_hats
			influence = 40
		}
	}
	after = {
		clr_country_flag = XMP_first_dalai_lama_on_action_bugfix_flag #clears the limit following the event so that current and future rulers who die without heir fire the on_monarch_death action
	}
}

country_event = { #Dalai Lama Heir selection with Dalai Lama as ruler
	id = XMP_TIB.10
	title = XMP_TIB.10.t
	desc = XMP_TIB.10.d
	picture = BUDDHISM_LAMA_eventPicture
	trigger = {
		NOT = { has_country_flag = XMP_in_dalai_lama_heir_selection_flag }
		NOT = { has_country_flag = XMP_tibetan_regency_council_flag }
		has_reform = XMP_TIB_tibetan_theocracy_reform
		has_heir = no
		}
		
	immediate = {
		hidden_effect = {
			set_country_flag = XMP_in_dalai_lama_heir_selection_flag
			random_list = { #ADM
				25 = {
					set_country_flag = XMP_adm_random_stats_tulku_flag #Completely Random
				}
				25 = {
					set_country_flag = XMP_one_adm_tulku_flag #Atleast 1 ADM
				}
				25 = {
					set_country_flag = XMP_one_admmil_tulku_flag #Atleast 1 ADM and 1 MIL
				}
				25 = {
					set_country_flag = XMP_one_admdip_tulku_flag #Atleast 1 ADM and 1 DIP
				}
			}
			random_list = { #DIP
				25 = {
					set_country_flag = XMP_dip_random_stats_tulku_flag #Completely Random
				}
				25 = {
					set_country_flag = XMP_one_dip_tulku_flag #Atleast 1 DIP
				}
				25 = {
					set_country_flag = XMP_one_dipmil_tulku_flag #Atleast 1 DIP and 1 MIL
				}
				25 = {
					set_country_flag = XMP_one_dipadm_tulku_flag #Atleast 1 DIP and 1 ADM
				}
			}
			random_list = { #MIL
				25 = {
					set_country_flag = XMP_mil_random_stats_tulku_flag #Completely Random
				}
				25 = {
					set_country_flag = XMP_one_mil_tulku_flag #Atleast 1 MIL
				}
				25 = {
					set_country_flag = XMP_one_miladm_tulku_flag #Atleast 1 MIL and 1 ADM
				}
				25 = {
					set_country_flag = XMP_one_mildip_tulku_flag #Atleast 1 MIL and 1 DIP
				}
			}
			random = { #Genius
				chance = 1
				set_country_flag = XMP_genius_tulku_flag #Atleast 4 in all stats
				}
			}
		}
	
	mean_time_to_happen = {
		months = 120
			
		modifier = {
			factor = 0.9
			stability = 1
			}
			
		modifier = { #Lhasa
			factor = 0.9
			677 = {
				owned_by = ROOT	
				}
			}
		modifier = { #Xining
			factor = 0.9
			2184 = {
				owned_by = ROOT	
				}
			}
			
		modifier = { #Shigatse
			factor = 0.9
			676 = {
				owned_by = ROOT	
				}
			}
		modifier = {
			factor = 0.8
			has_country_modifier = XMP_restore_the_gompas
			}
		}
		
	option = {
		name = XMP_TIB.10.a #ADM Random
		trigger = {
			ai = no
			has_country_flag = XMP_adm_random_stats_tulku_flag
		}
		clr_country_flag = XMP_in_dalai_lama_heir_selection_flag 
		clr_country_flag = XMP_adm_random_stats_tulku_flag
		clr_country_flag = XMP_one_adm_tulku_flag 
		clr_country_flag = XMP_one_admmil_tulku_flag
		clr_country_flag = XMP_one_admdip_tulku_flag
		clr_country_flag = XMP_dip_random_stats_tulku_flag
		clr_country_flag = XMP_one_dip_tulku_flag 
		clr_country_flag = XMP_one_dipmil_tulku_flag
		clr_country_flag = XMP_one_dipadm_tulku_flag
		clr_country_flag = XMP_mil_random_stats_tulku_flag
		clr_country_flag = XMP_one_mil_tulku_flag
		clr_country_flag = XMP_one_miladm_tulku_flag
		clr_country_flag = XMP_one_mildip_tulku_flag
		clr_country_flag = XMP_genius_tulku_flag
		set_country_flag = XMP_dalai_lama_heir_flag
		define_heir = {
			male = yes
			age = 10
		}
	}

	option = {
		name = XMP_TIB.10.b #One ADM
		trigger = {
			ai = no
			has_country_flag = XMP_one_adm_tulku_flag
		}
		clr_country_flag = XMP_in_dalai_lama_heir_selection_flag 
		clr_country_flag = XMP_adm_random_stats_tulku_flag
		clr_country_flag = XMP_one_adm_tulku_flag 
		clr_country_flag = XMP_one_admmil_tulku_flag
		clr_country_flag = XMP_one_admdip_tulku_flag
		clr_country_flag = XMP_dip_random_stats_tulku_flag
		clr_country_flag = XMP_one_dip_tulku_flag 
		clr_country_flag = XMP_one_dipmil_tulku_flag
		clr_country_flag = XMP_one_dipadm_tulku_flag
		clr_country_flag = XMP_mil_random_stats_tulku_flag
		clr_country_flag = XMP_one_mil_tulku_flag
		clr_country_flag = XMP_one_miladm_tulku_flag
		clr_country_flag = XMP_one_mildip_tulku_flag
		clr_country_flag = XMP_genius_tulku_flag
		set_country_flag = XMP_dalai_lama_heir_flag
		define_heir = {
			male = yes
			ADM = 1
			age = 10
		}
	}

	option = {
		name = XMP_TIB.10.c #One ADM and MiL
		trigger = {
			ai = no
			has_country_flag = XMP_one_admmil_tulku_flag
		}
		clr_country_flag = XMP_in_dalai_lama_heir_selection_flag 
		clr_country_flag = XMP_adm_random_stats_tulku_flag
		clr_country_flag = XMP_one_adm_tulku_flag 
		clr_country_flag = XMP_one_admmil_tulku_flag
		clr_country_flag = XMP_one_admdip_tulku_flag
		clr_country_flag = XMP_dip_random_stats_tulku_flag
		clr_country_flag = XMP_one_dip_tulku_flag 
		clr_country_flag = XMP_one_dipmil_tulku_flag
		clr_country_flag = XMP_one_dipadm_tulku_flag
		clr_country_flag = XMP_mil_random_stats_tulku_flag
		clr_country_flag = XMP_one_mil_tulku_flag
		clr_country_flag = XMP_one_miladm_tulku_flag
		clr_country_flag = XMP_one_mildip_tulku_flag
		clr_country_flag = XMP_genius_tulku_flag
		set_country_flag = XMP_dalai_lama_heir_flag
		define_heir = {
			male = yes
			ADM = 1
			MIL = 1
			age = 10
		}
	}

	option = {
		name = XMP_TIB.10.n #One ADM and DIP
		trigger = {
			ai = no
			has_country_flag = XMP_one_admdip_tulku_flag
		}
		clr_country_flag = XMP_in_dalai_lama_heir_selection_flag 
		clr_country_flag = XMP_adm_random_stats_tulku_flag
		clr_country_flag = XMP_one_adm_tulku_flag 
		clr_country_flag = XMP_one_admmil_tulku_flag
		clr_country_flag = XMP_one_admdip_tulku_flag
		clr_country_flag = XMP_dip_random_stats_tulku_flag
		clr_country_flag = XMP_one_dip_tulku_flag 
		clr_country_flag = XMP_one_dipmil_tulku_flag
		clr_country_flag = XMP_one_dipadm_tulku_flag
		clr_country_flag = XMP_mil_random_stats_tulku_flag
		clr_country_flag = XMP_one_mil_tulku_flag
		clr_country_flag = XMP_one_miladm_tulku_flag
		clr_country_flag = XMP_one_mildip_tulku_flag
		clr_country_flag = XMP_genius_tulku_flag
		set_country_flag = XMP_dalai_lama_heir_flag
		define_heir = {
			male = yes
			ADM = 1
			DIP = 1
			age = 10
		}
	}

	option = {
		name = XMP_TIB.10.e #DIP Random
		trigger = {
			ai = no
			has_country_flag = XMP_dip_random_stats_tulku_flag
		}
		clr_country_flag = XMP_in_dalai_lama_heir_selection_flag 
		clr_country_flag = XMP_adm_random_stats_tulku_flag
		clr_country_flag = XMP_one_adm_tulku_flag 
		clr_country_flag = XMP_one_admmil_tulku_flag
		clr_country_flag = XMP_one_admdip_tulku_flag
		clr_country_flag = XMP_dip_random_stats_tulku_flag
		clr_country_flag = XMP_one_dip_tulku_flag 
		clr_country_flag = XMP_one_dipmil_tulku_flag
		clr_country_flag = XMP_one_dipadm_tulku_flag
		clr_country_flag = XMP_mil_random_stats_tulku_flag
		clr_country_flag = XMP_one_mil_tulku_flag
		clr_country_flag = XMP_one_miladm_tulku_flag
		clr_country_flag = XMP_one_mildip_tulku_flag
		clr_country_flag = XMP_genius_tulku_flag
		set_country_flag = XMP_dalai_lama_heir_flag
		define_heir = {
			male = yes
			age = 10
		}
	}

	option = {
		name = XMP_TIB.10.f #One DIP and MIL
		trigger = {
			ai = no
			has_country_flag = XMP_one_dipmil_tulku_flag
		}
		clr_country_flag = XMP_in_dalai_lama_heir_selection_flag 
		clr_country_flag = XMP_adm_random_stats_tulku_flag
		clr_country_flag = XMP_one_adm_tulku_flag 
		clr_country_flag = XMP_one_admmil_tulku_flag
		clr_country_flag = XMP_one_admdip_tulku_flag
		clr_country_flag = XMP_dip_random_stats_tulku_flag
		clr_country_flag = XMP_one_dip_tulku_flag 
		clr_country_flag = XMP_one_dipmil_tulku_flag
		clr_country_flag = XMP_one_dipadm_tulku_flag
		clr_country_flag = XMP_mil_random_stats_tulku_flag
		clr_country_flag = XMP_one_mil_tulku_flag
		clr_country_flag = XMP_one_miladm_tulku_flag
		clr_country_flag = XMP_one_mildip_tulku_flag
		clr_country_flag = XMP_genius_tulku_flag
		set_country_flag = XMP_dalai_lama_heir_flag
		define_heir = {
			male = yes
			DIP = 1
			MIL = 1
			age = 10
		}
	}

	option = {
		name = XMP_TIB.10.g #One DIP and ADM
		trigger = {
			ai = no
			has_country_flag = XMP_one_dipadm_tulku_flag
		}
		clr_country_flag = XMP_in_dalai_lama_heir_selection_flag 
		clr_country_flag = XMP_adm_random_stats_tulku_flag
		clr_country_flag = XMP_one_adm_tulku_flag 
		clr_country_flag = XMP_one_admmil_tulku_flag
		clr_country_flag = XMP_one_admdip_tulku_flag
		clr_country_flag = XMP_dip_random_stats_tulku_flag
		clr_country_flag = XMP_one_dip_tulku_flag 
		clr_country_flag = XMP_one_dipmil_tulku_flag
		clr_country_flag = XMP_one_dipadm_tulku_flag
		clr_country_flag = XMP_mil_random_stats_tulku_flag
		clr_country_flag = XMP_one_mil_tulku_flag
		clr_country_flag = XMP_one_miladm_tulku_flag
		clr_country_flag = XMP_one_mildip_tulku_flag
		clr_country_flag = XMP_genius_tulku_flag
		set_country_flag = XMP_dalai_lama_heir_flag
		define_heir = {
			male = yes
			DIP = 1
			ADM = 1
			age = 10
		}
	}

	option = {
		name = XMP_TIB.10.h #One DIP
		trigger = {
			ai = no
			has_country_flag = XMP_one_dip_tulku_flag
		}
		clr_country_flag = XMP_in_dalai_lama_heir_selection_flag 
		clr_country_flag = XMP_adm_random_stats_tulku_flag
		clr_country_flag = XMP_one_adm_tulku_flag 
		clr_country_flag = XMP_one_admmil_tulku_flag
		clr_country_flag = XMP_one_admdip_tulku_flag
		clr_country_flag = XMP_dip_random_stats_tulku_flag
		clr_country_flag = XMP_one_dip_tulku_flag 
		clr_country_flag = XMP_one_dipmil_tulku_flag
		clr_country_flag = XMP_one_dipadm_tulku_flag
		clr_country_flag = XMP_mil_random_stats_tulku_flag
		clr_country_flag = XMP_one_mil_tulku_flag
		clr_country_flag = XMP_one_miladm_tulku_flag
		clr_country_flag = XMP_one_mildip_tulku_flag
		clr_country_flag = XMP_genius_tulku_flag
		set_country_flag = XMP_dalai_lama_heir_flag
		define_heir = {
			male = yes
			DIP = 1
			age = 10
		}
	}

	option = {
		name = XMP_TIB.10.i #MIL Random
		trigger = {
			ai = no
			has_country_flag = XMP_mil_random_stats_tulku_flag
		}
		clr_country_flag = XMP_in_dalai_lama_heir_selection_flag 
		clr_country_flag = XMP_adm_random_stats_tulku_flag
		clr_country_flag = XMP_one_adm_tulku_flag 
		clr_country_flag = XMP_one_admmil_tulku_flag
		clr_country_flag = XMP_one_admdip_tulku_flag
		clr_country_flag = XMP_dip_random_stats_tulku_flag
		clr_country_flag = XMP_one_dip_tulku_flag 
		clr_country_flag = XMP_one_dipmil_tulku_flag
		clr_country_flag = XMP_one_dipadm_tulku_flag
		clr_country_flag = XMP_mil_random_stats_tulku_flag
		clr_country_flag = XMP_one_mil_tulku_flag
		clr_country_flag = XMP_one_miladm_tulku_flag
		clr_country_flag = XMP_one_mildip_tulku_flag
		clr_country_flag = XMP_genius_tulku_flag
		set_country_flag = XMP_dalai_lama_heir_flag
		define_heir = {
			male = yes
			age = 10
		}
	}

	option = {
		name = XMP_TIB.10.j #One MIL
		trigger = {
			ai = no
			has_country_flag = XMP_one_mil_tulku_flag
		}
		clr_country_flag = XMP_in_dalai_lama_heir_selection_flag 
		clr_country_flag = XMP_adm_random_stats_tulku_flag
		clr_country_flag = XMP_one_adm_tulku_flag 
		clr_country_flag = XMP_one_admmil_tulku_flag
		clr_country_flag = XMP_one_admdip_tulku_flag
		clr_country_flag = XMP_dip_random_stats_tulku_flag
		clr_country_flag = XMP_one_dip_tulku_flag 
		clr_country_flag = XMP_one_dipmil_tulku_flag
		clr_country_flag = XMP_one_dipadm_tulku_flag
		clr_country_flag = XMP_mil_random_stats_tulku_flag
		clr_country_flag = XMP_one_mil_tulku_flag
		clr_country_flag = XMP_one_miladm_tulku_flag
		clr_country_flag = XMP_one_mildip_tulku_flag
		clr_country_flag = XMP_genius_tulku_flag
		set_country_flag = XMP_dalai_lama_heir_flag
		define_heir = {
			male = yes
			MIL = 1
			age = 10
		}
	}

	option = {
		name = XMP_TIB.10.k #One MIL and ADM
		trigger = {
			ai = no
			has_country_flag = XMP_one_miladm_tulku_flag
		}
		clr_country_flag = XMP_in_dalai_lama_heir_selection_flag 
		clr_country_flag = XMP_adm_random_stats_tulku_flag
		clr_country_flag = XMP_one_adm_tulku_flag 
		clr_country_flag = XMP_one_admmil_tulku_flag
		clr_country_flag = XMP_one_admdip_tulku_flag
		clr_country_flag = XMP_dip_random_stats_tulku_flag
		clr_country_flag = XMP_one_dip_tulku_flag 
		clr_country_flag = XMP_one_dipmil_tulku_flag
		clr_country_flag = XMP_one_dipadm_tulku_flag
		clr_country_flag = XMP_mil_random_stats_tulku_flag
		clr_country_flag = XMP_one_mil_tulku_flag
		clr_country_flag = XMP_one_miladm_tulku_flag
		clr_country_flag = XMP_one_mildip_tulku_flag
		clr_country_flag = XMP_genius_tulku_flag
		set_country_flag = XMP_dalai_lama_heir_flag
		define_heir = {
			male = yes
			MIL = 1
			ADM = 1
			age = 10
		}
	}

	option = {
		name = XMP_TIB.10.l #One MIL and DIP
		trigger = {
			ai = no
			has_country_flag = XMP_one_mildip_tulku_flag
		}
		clr_country_flag = XMP_in_dalai_lama_heir_selection_flag 
		clr_country_flag = XMP_adm_random_stats_tulku_flag
		clr_country_flag = XMP_one_adm_tulku_flag 
		clr_country_flag = XMP_one_admmil_tulku_flag
		clr_country_flag = XMP_one_admdip_tulku_flag
		clr_country_flag = XMP_dip_random_stats_tulku_flag
		clr_country_flag = XMP_one_dip_tulku_flag 
		clr_country_flag = XMP_one_dipmil_tulku_flag
		clr_country_flag = XMP_one_dipadm_tulku_flag
		clr_country_flag = XMP_mil_random_stats_tulku_flag
		clr_country_flag = XMP_one_mil_tulku_flag
		clr_country_flag = XMP_one_miladm_tulku_flag
		clr_country_flag = XMP_one_mildip_tulku_flag
		clr_country_flag = XMP_genius_tulku_flag
		set_country_flag = XMP_dalai_lama_heir_flag
		define_heir = {
			male = yes
			MIL = 1
			DIP = 1
			age = 10
		}
	}

	option = {
		name = XMP_TIB.10.m #Four in all stats
		highlight = yes
		trigger = {
			ai = no
			has_country_flag = XMP_genius_tulku_flag
		}
		clr_country_flag = XMP_in_dalai_lama_heir_selection_flag 
		clr_country_flag = XMP_adm_random_stats_tulku_flag
		clr_country_flag = XMP_one_adm_tulku_flag 
		clr_country_flag = XMP_one_admmil_tulku_flag
		clr_country_flag = XMP_one_admdip_tulku_flag
		clr_country_flag = XMP_dip_random_stats_tulku_flag
		clr_country_flag = XMP_one_dip_tulku_flag 
		clr_country_flag = XMP_one_dipmil_tulku_flag
		clr_country_flag = XMP_one_dipadm_tulku_flag
		clr_country_flag = XMP_mil_random_stats_tulku_flag
		clr_country_flag = XMP_one_mil_tulku_flag
		clr_country_flag = XMP_one_miladm_tulku_flag
		clr_country_flag = XMP_one_mildip_tulku_flag
		clr_country_flag = XMP_genius_tulku_flag
		set_country_flag = XMP_dalai_lama_heir_flag
		define_heir = {
			male = yes
			ADM = 4
			DIP = 4
			MIL = 4
			age = 10
		}
	}
}

country_event = { #On death of Dalai Lama without heir
	id = XMP_TIB.11
	title = XMP_TIB.11.t
	desc = XMP_TIB.11.d
	picture = BUDDHISM_MONASTERY_eventPicture

	is_triggered_only = yes

	option = {
		name = "XMP_TIB.11.a"
		define_ruler = {
			male = yes
			regency = yes
			ADM = 3
			DIP = 5
			MIL = 1
			fixed = yes
			age = 40
			}
		set_country_flag = XMP_tibetan_regency_council_flag
		set_country_flag = XMP_on_high_lama_removal_bugfix_flag
		country_event = { id = XMP_TIB.12 }
	}
}

country_event = { #Dalai Lama Heir selection with regency from XMP_TIB.11
	id = XMP_TIB.12
	title = XMP_TIB.12.t
	desc = XMP_TIB.12.d
	picture = BUDDHISM_LAMA_eventPicture
	is_triggered_only = yes
		
	immediate = {
		hidden_effect = {
			set_country_flag = XMP_in_dalai_lama_heir_selection_flag
			random_list = { #ADM
				25 = {
					set_country_flag = XMP_adm_random_stats_tulku_flag #Completely Random
				}
				25 = {
					set_country_flag = XMP_one_adm_tulku_flag #Atleast 1 ADM
				}
				25 = {
					set_country_flag = XMP_one_admmil_tulku_flag #Atleast 1 ADM and 1 MIL
				}
				25 = {
					set_country_flag = XMP_one_admdip_tulku_flag #Atleast 1 ADM and 1 DIP
				}
			}
			random_list = { #DIP
				25 = {
					set_country_flag = XMP_dip_random_stats_tulku_flag #Completely Random
				}
				25 = {
					set_country_flag = XMP_one_dip_tulku_flag #Atleast 1 DIP
				}
				25 = {
					set_country_flag = XMP_one_dipmil_tulku_flag #Atleast 1 DIP and 1 MIL
				}
				25 = {
					set_country_flag = XMP_one_dipadm_tulku_flag #Atleast 1 DIP and 1 ADM
				}
			}
			random_list = { #MIL
				25 = {
					set_country_flag = XMP_mil_random_stats_tulku_flag #Completely Random
				}
				25 = {
					set_country_flag = XMP_one_mil_tulku_flag #Atleast 1 MIL
				}
				25 = {
					set_country_flag = XMP_one_miladm_tulku_flag #Atleast 1 MIL and 1 ADM
				}
				25 = {
					set_country_flag = XMP_one_mildip_tulku_flag #Atleast 1 MIL and 1 DIP
				}
			}
			random = { #Genius
				chance = 1
				set_country_flag = XMP_genius_tulku_flag #Atleast 4 in all stats
				}
			}
		}
		
	option = {
		name = XMP_TIB.10.a #ADM Random
		trigger = {
			ai = no
			has_country_flag = XMP_adm_random_stats_tulku_flag
		}
		clr_country_flag = XMP_in_dalai_lama_heir_selection_flag 
		clr_country_flag = XMP_adm_random_stats_tulku_flag
		clr_country_flag = XMP_one_adm_tulku_flag 
		clr_country_flag = XMP_one_admmil_tulku_flag
		clr_country_flag = XMP_one_admdip_tulku_flag
		clr_country_flag = XMP_dip_random_stats_tulku_flag
		clr_country_flag = XMP_one_dip_tulku_flag 
		clr_country_flag = XMP_one_dipmil_tulku_flag
		clr_country_flag = XMP_one_dipadm_tulku_flag
		clr_country_flag = XMP_mil_random_stats_tulku_flag
		clr_country_flag = XMP_one_mil_tulku_flag
		clr_country_flag = XMP_one_miladm_tulku_flag
		clr_country_flag = XMP_one_mildip_tulku_flag
		clr_country_flag = XMP_genius_tulku_flag
		set_country_flag = XMP_dalai_lama_heir_flag
		define_heir = {
			male = yes
			age = 10
		}
		add_corruption = 2
	}

	option = {
		name = XMP_TIB.10.b #One ADM
		trigger = {
			ai = no
			has_country_flag = XMP_one_adm_tulku_flag
		}
		clr_country_flag = XMP_in_dalai_lama_heir_selection_flag 
		clr_country_flag = XMP_adm_random_stats_tulku_flag
		clr_country_flag = XMP_one_adm_tulku_flag 
		clr_country_flag = XMP_one_admmil_tulku_flag
		clr_country_flag = XMP_one_admdip_tulku_flag
		clr_country_flag = XMP_dip_random_stats_tulku_flag
		clr_country_flag = XMP_one_dip_tulku_flag 
		clr_country_flag = XMP_one_dipmil_tulku_flag
		clr_country_flag = XMP_one_dipadm_tulku_flag
		clr_country_flag = XMP_mil_random_stats_tulku_flag
		clr_country_flag = XMP_one_mil_tulku_flag
		clr_country_flag = XMP_one_miladm_tulku_flag
		clr_country_flag = XMP_one_mildip_tulku_flag
		clr_country_flag = XMP_genius_tulku_flag
		set_country_flag = XMP_dalai_lama_heir_flag
		define_heir = {
			male = yes
			ADM = 1
			age = 10
		}
		add_corruption = 2
	}

	option = {
		name = XMP_TIB.10.c #One ADM and MiL
		trigger = {
			ai = no
			has_country_flag = XMP_one_admmil_tulku_flag
		}
		clr_country_flag = XMP_in_dalai_lama_heir_selection_flag 
		clr_country_flag = XMP_adm_random_stats_tulku_flag
		clr_country_flag = XMP_one_adm_tulku_flag 
		clr_country_flag = XMP_one_admmil_tulku_flag
		clr_country_flag = XMP_one_admdip_tulku_flag
		clr_country_flag = XMP_dip_random_stats_tulku_flag
		clr_country_flag = XMP_one_dip_tulku_flag 
		clr_country_flag = XMP_one_dipmil_tulku_flag
		clr_country_flag = XMP_one_dipadm_tulku_flag
		clr_country_flag = XMP_mil_random_stats_tulku_flag
		clr_country_flag = XMP_one_mil_tulku_flag
		clr_country_flag = XMP_one_miladm_tulku_flag
		clr_country_flag = XMP_one_mildip_tulku_flag
		clr_country_flag = XMP_genius_tulku_flag
		set_country_flag = XMP_dalai_lama_heir_flag
		define_heir = {
			male = yes
			ADM = 1
			MIL = 1
			age = 10
		}
		add_corruption = 2
	}

	option = {
		name = XMP_TIB.10.n #One ADM and DIP
		trigger = {
			ai = no
			has_country_flag = XMP_one_admdip_tulku_flag
		}
		clr_country_flag = XMP_in_dalai_lama_heir_selection_flag 
		clr_country_flag = XMP_adm_random_stats_tulku_flag
		clr_country_flag = XMP_one_adm_tulku_flag 
		clr_country_flag = XMP_one_admmil_tulku_flag
		clr_country_flag = XMP_one_admdip_tulku_flag
		clr_country_flag = XMP_dip_random_stats_tulku_flag
		clr_country_flag = XMP_one_dip_tulku_flag 
		clr_country_flag = XMP_one_dipmil_tulku_flag
		clr_country_flag = XMP_one_dipadm_tulku_flag
		clr_country_flag = XMP_mil_random_stats_tulku_flag
		clr_country_flag = XMP_one_mil_tulku_flag
		clr_country_flag = XMP_one_miladm_tulku_flag
		clr_country_flag = XMP_one_mildip_tulku_flag
		clr_country_flag = XMP_genius_tulku_flag
		set_country_flag = XMP_dalai_lama_heir_flag
		define_heir = {
			male = yes
			ADM = 1
			DIP = 1
			age = 10
		}
		add_corruption = 2
	}

	option = {
		name = XMP_TIB.10.e #DIP Random
		trigger = {
			ai = no
			has_country_flag = XMP_dip_random_stats_tulku_flag
		}
		clr_country_flag = XMP_in_dalai_lama_heir_selection_flag 
		clr_country_flag = XMP_adm_random_stats_tulku_flag
		clr_country_flag = XMP_one_adm_tulku_flag 
		clr_country_flag = XMP_one_admmil_tulku_flag
		clr_country_flag = XMP_one_admdip_tulku_flag
		clr_country_flag = XMP_dip_random_stats_tulku_flag
		clr_country_flag = XMP_one_dip_tulku_flag 
		clr_country_flag = XMP_one_dipmil_tulku_flag
		clr_country_flag = XMP_one_dipadm_tulku_flag
		clr_country_flag = XMP_mil_random_stats_tulku_flag
		clr_country_flag = XMP_one_mil_tulku_flag
		clr_country_flag = XMP_one_miladm_tulku_flag
		clr_country_flag = XMP_one_mildip_tulku_flag
		clr_country_flag = XMP_genius_tulku_flag
		set_country_flag = XMP_dalai_lama_heir_flag
		define_heir = {
			male = yes
			age = 10
		}
		add_corruption = 2
	}

	option = {
		name = XMP_TIB.10.f #One DIP and MIL
		trigger = {
			ai = no
			has_country_flag = XMP_one_dipmil_tulku_flag
		}
		clr_country_flag = XMP_in_dalai_lama_heir_selection_flag 
		clr_country_flag = XMP_adm_random_stats_tulku_flag
		clr_country_flag = XMP_one_adm_tulku_flag 
		clr_country_flag = XMP_one_admmil_tulku_flag
		clr_country_flag = XMP_one_admdip_tulku_flag
		clr_country_flag = XMP_dip_random_stats_tulku_flag
		clr_country_flag = XMP_one_dip_tulku_flag 
		clr_country_flag = XMP_one_dipmil_tulku_flag
		clr_country_flag = XMP_one_dipadm_tulku_flag
		clr_country_flag = XMP_mil_random_stats_tulku_flag
		clr_country_flag = XMP_one_mil_tulku_flag
		clr_country_flag = XMP_one_miladm_tulku_flag
		clr_country_flag = XMP_one_mildip_tulku_flag
		clr_country_flag = XMP_genius_tulku_flag
		set_country_flag = XMP_dalai_lama_heir_flag
		define_heir = {
			male = yes
			DIP = 1
			MIL = 1
			age = 10
		}
		add_corruption = 2
	}

	option = {
		name = XMP_TIB.10.g #One DIP and ADM
		trigger = {
			ai = no
			has_country_flag = XMP_one_dipadm_tulku_flag
		}
		clr_country_flag = XMP_in_dalai_lama_heir_selection_flag 
		clr_country_flag = XMP_adm_random_stats_tulku_flag
		clr_country_flag = XMP_one_adm_tulku_flag 
		clr_country_flag = XMP_one_admmil_tulku_flag
		clr_country_flag = XMP_one_admdip_tulku_flag
		clr_country_flag = XMP_dip_random_stats_tulku_flag
		clr_country_flag = XMP_one_dip_tulku_flag 
		clr_country_flag = XMP_one_dipmil_tulku_flag
		clr_country_flag = XMP_one_dipadm_tulku_flag
		clr_country_flag = XMP_mil_random_stats_tulku_flag
		clr_country_flag = XMP_one_mil_tulku_flag
		clr_country_flag = XMP_one_miladm_tulku_flag
		clr_country_flag = XMP_one_mildip_tulku_flag
		clr_country_flag = XMP_genius_tulku_flag
		set_country_flag = XMP_dalai_lama_heir_flag
		define_heir = {
			male = yes
			DIP = 1
			ADM = 1
			age = 10
		}
		add_corruption = 2
	}

	option = {
		name = XMP_TIB.10.h #One DIP
		trigger = {
			ai = no
			has_country_flag = XMP_one_dip_tulku_flag
		}
		clr_country_flag = XMP_in_dalai_lama_heir_selection_flag 
		clr_country_flag = XMP_adm_random_stats_tulku_flag
		clr_country_flag = XMP_one_adm_tulku_flag 
		clr_country_flag = XMP_one_admmil_tulku_flag
		clr_country_flag = XMP_one_admdip_tulku_flag
		clr_country_flag = XMP_dip_random_stats_tulku_flag
		clr_country_flag = XMP_one_dip_tulku_flag 
		clr_country_flag = XMP_one_dipmil_tulku_flag
		clr_country_flag = XMP_one_dipadm_tulku_flag
		clr_country_flag = XMP_mil_random_stats_tulku_flag
		clr_country_flag = XMP_one_mil_tulku_flag
		clr_country_flag = XMP_one_miladm_tulku_flag
		clr_country_flag = XMP_one_mildip_tulku_flag
		clr_country_flag = XMP_genius_tulku_flag
		set_country_flag = XMP_dalai_lama_heir_flag
		define_heir = {
			male = yes
			DIP = 1
			age = 10
		}
		add_corruption = 2
	}

	option = {
		name = XMP_TIB.10.i #MIL Random
		trigger = {
			ai = no
			has_country_flag = XMP_mil_random_stats_tulku_flag
		}
		clr_country_flag = XMP_in_dalai_lama_heir_selection_flag 
		clr_country_flag = XMP_adm_random_stats_tulku_flag
		clr_country_flag = XMP_one_adm_tulku_flag 
		clr_country_flag = XMP_one_admmil_tulku_flag
		clr_country_flag = XMP_one_admdip_tulku_flag
		clr_country_flag = XMP_dip_random_stats_tulku_flag
		clr_country_flag = XMP_one_dip_tulku_flag 
		clr_country_flag = XMP_one_dipmil_tulku_flag
		clr_country_flag = XMP_one_dipadm_tulku_flag
		clr_country_flag = XMP_mil_random_stats_tulku_flag
		clr_country_flag = XMP_one_mil_tulku_flag
		clr_country_flag = XMP_one_miladm_tulku_flag
		clr_country_flag = XMP_one_mildip_tulku_flag
		clr_country_flag = XMP_genius_tulku_flag
		set_country_flag = XMP_dalai_lama_heir_flag
		define_heir = {
			male = yes
			age = 10
		}
		add_corruption = 2
	}

	option = {
		name = XMP_TIB.10.j #One MIL
		trigger = {
			ai = no
			has_country_flag = XMP_one_mil_tulku_flag
		}
		clr_country_flag = XMP_in_dalai_lama_heir_selection_flag 
		clr_country_flag = XMP_adm_random_stats_tulku_flag
		clr_country_flag = XMP_one_adm_tulku_flag 
		clr_country_flag = XMP_one_admmil_tulku_flag
		clr_country_flag = XMP_one_admdip_tulku_flag
		clr_country_flag = XMP_dip_random_stats_tulku_flag
		clr_country_flag = XMP_one_dip_tulku_flag 
		clr_country_flag = XMP_one_dipmil_tulku_flag
		clr_country_flag = XMP_one_dipadm_tulku_flag
		clr_country_flag = XMP_mil_random_stats_tulku_flag
		clr_country_flag = XMP_one_mil_tulku_flag
		clr_country_flag = XMP_one_miladm_tulku_flag
		clr_country_flag = XMP_one_mildip_tulku_flag
		clr_country_flag = XMP_genius_tulku_flag
		set_country_flag = XMP_dalai_lama_heir_flag
		define_heir = {
			male = yes
			MIL = 1
			age = 10
		}
		add_corruption = 2
	}

	option = {
		name = XMP_TIB.10.k #One MIL and ADM
		trigger = {
			ai = no
			has_country_flag = XMP_one_miladm_tulku_flag
		}
		clr_country_flag = XMP_in_dalai_lama_heir_selection_flag 
		clr_country_flag = XMP_adm_random_stats_tulku_flag
		clr_country_flag = XMP_one_adm_tulku_flag 
		clr_country_flag = XMP_one_admmil_tulku_flag
		clr_country_flag = XMP_one_admdip_tulku_flag
		clr_country_flag = XMP_dip_random_stats_tulku_flag
		clr_country_flag = XMP_one_dip_tulku_flag 
		clr_country_flag = XMP_one_dipmil_tulku_flag
		clr_country_flag = XMP_one_dipadm_tulku_flag
		clr_country_flag = XMP_mil_random_stats_tulku_flag
		clr_country_flag = XMP_one_mil_tulku_flag
		clr_country_flag = XMP_one_miladm_tulku_flag
		clr_country_flag = XMP_one_mildip_tulku_flag
		clr_country_flag = XMP_genius_tulku_flag
		set_country_flag = XMP_dalai_lama_heir_flag
		define_heir = {
			male = yes
			MIL = 1
			ADM = 1
			age = 10
		}
		add_corruption = 2
	}

	option = {
		name = XMP_TIB.10.l #One MIL and DIP
		trigger = {
			ai = no
			has_country_flag = XMP_one_mildip_tulku_flag
		}
		clr_country_flag = XMP_in_dalai_lama_heir_selection_flag 
		clr_country_flag = XMP_adm_random_stats_tulku_flag
		clr_country_flag = XMP_one_adm_tulku_flag 
		clr_country_flag = XMP_one_admmil_tulku_flag
		clr_country_flag = XMP_one_admdip_tulku_flag
		clr_country_flag = XMP_dip_random_stats_tulku_flag
		clr_country_flag = XMP_one_dip_tulku_flag 
		clr_country_flag = XMP_one_dipmil_tulku_flag
		clr_country_flag = XMP_one_dipadm_tulku_flag
		clr_country_flag = XMP_mil_random_stats_tulku_flag
		clr_country_flag = XMP_one_mil_tulku_flag
		clr_country_flag = XMP_one_miladm_tulku_flag
		clr_country_flag = XMP_one_mildip_tulku_flag
		clr_country_flag = XMP_genius_tulku_flag
		set_country_flag = XMP_dalai_lama_heir_flag
		define_heir = {
			male = yes
			MIL = 1
			DIP = 1
			age = 10
		}
		add_corruption = 2
	}

	option = {
		name = XMP_TIB.10.m #Four in all stats
		highlight = yes
		trigger = {
			ai = no
			has_country_flag = XMP_genius_tulku_flag
		}
		clr_country_flag = XMP_in_dalai_lama_heir_selection_flag 
		clr_country_flag = XMP_adm_random_stats_tulku_flag
		clr_country_flag = XMP_one_adm_tulku_flag 
		clr_country_flag = XMP_one_admmil_tulku_flag
		clr_country_flag = XMP_one_admdip_tulku_flag
		clr_country_flag = XMP_dip_random_stats_tulku_flag
		clr_country_flag = XMP_one_dip_tulku_flag 
		clr_country_flag = XMP_one_dipmil_tulku_flag
		clr_country_flag = XMP_one_dipadm_tulku_flag
		clr_country_flag = XMP_mil_random_stats_tulku_flag
		clr_country_flag = XMP_one_mil_tulku_flag
		clr_country_flag = XMP_one_miladm_tulku_flag
		clr_country_flag = XMP_one_mildip_tulku_flag
		clr_country_flag = XMP_genius_tulku_flag
		set_country_flag = XMP_dalai_lama_heir_flag
		define_heir = {
			male = yes
			ADM = 4
			DIP = 4
			MIL = 4
			age = 10
		}
		add_corruption = 2
	}
}

country_event = { #On regency council with heir
	id = XMP_TIB.13
	title = XMP_TIB.13.t
	desc = XMP_TIB.13.d
	picture = BUDDHISM_LAMA_eventPicture
	is_triggered_only = yes
		
    option = {
        name = "XMP_TIB.13.a"
		}
	}
	
country_event = { #On death of heir with regency council
	id = XMP_TIB.14
	title = XMP_TIB.14.t
	desc = XMP_TIB.14.d
	picture = BUDDHISM_MONASTERY_eventPicture

	is_triggered_only = yes

	option = {
		name = "XMP_TIB.14.a"
		define_ruler = {
			male = yes
			ADM = 3
			DIP = 4
			MIL = 3
			fixed = yes
			age = 40
			}
		 add_stability = -2
		 add_corruption = 2
		 clr_country_flag = XMP_high_lama_election_bugfix_flag #prevents this new ruler from firing XMP_TIB.11
	}
}
##########################